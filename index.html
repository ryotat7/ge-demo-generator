<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ADK Agent Demo Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            }
          },
          animation: {
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Inter', sans-serif;
    }

    .glass {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .gradient-bg {
      background: radial-gradient(circle at top right, #0c4a6e, #0f172a);
    }

    .spinner {
      animation: rotate 2s linear infinite;
    }

    @keyframes rotate {
      100% {
        transform: rotate(360deg);
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .idea-chip {
      transition: all 0.2s;
    }

    .idea-chip:hover {
      background: rgba(14, 165, 233, 0.2);
      border-color: #0ea5e9;
      color: white;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #475569;
    }

    /* Hide scrollbar in central pane until hovered */
    main::-webkit-scrollbar-thumb {
      background: transparent;
    }

    main:hover::-webkit-scrollbar-thumb {
      background: #334155;
    }

    .highlight-glow {
      box-shadow: 0 0 15px rgba(14, 165, 233, 0.3);
    }

    .step-completed {
      border-color: #10b981;
      background: rgba(16, 185, 129, 0.05);
    }

    .step-completed .step-icon {
      background: #10b981;
      color: white;
      animation: none;
    }

    #archChevron.rotated {
      transform: rotate(180deg);
    }

    #toast {
      visibility: hidden;
      min-width: 250px;
      margin-left: -125px;
      background-color: #0ea5e9;
      color: #fff;
      text-align: center;
      border-radius: 12px;
      padding: 16px;
      position: fixed;
      z-index: 100;
      left: 50%;
      bottom: 30px;
      font-size: 14px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      opacity: 0;
      transition: opacity 0.3s, bottom 0.3s, visibility 0.3s;
    }

    #toast.show {
      visibility: visible;
      opacity: 1;
      bottom: 50px;
    }

    /* Navigation Sidebar */
    .nav-container {
      position: sticky;
      top: 2rem;
      height: fit-content;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      color: #94a3b8;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: all 0.2s;
      border: 1px solid transparent;
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, 0.05);
      color: #f1f5f9;
    }

    .nav-item.active {
      background: rgba(14, 165, 233, 0.1);
      border-color: rgba(14, 165, 233, 0.3);
      color: #38bdf8;
      box-shadow: 0 4px 12px rgba(14, 165, 233, 0.1);
    }

    .nav-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
    }

    html,
    main {
      scroll-behavior: smooth;
    }

    section {
      scroll-margin-top: 2rem;
    }

    /* Zoomably Styles */
    .zoom-container {
      position: relative;
      overflow: hidden;
      cursor: grab;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .zoom-container:active {
      cursor: grabbing;
    }

    .zoom-content {
      transition: transform 0.1s ease-out;
      transform-origin: center;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 320px;
    }

    .zoom-controls {
      position: absolute;
      bottom: 1rem;
      right: 1rem;
      display: flex;
      gap: 0.5rem;
      z-index: 10;
    }

    .zoom-btn {
      padding: 0.5rem;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 0.5rem;
      color: #94a3b8;
      transition: all 0.2s;
    }

    .zoom-btn:hover {
      background: #1e293b;
      color: #38bdf8;
      border-color: rgba(56, 189, 248, 0.4);
    }

    /* Onboarding Modal */
    #onboardingModal {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 200;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(8px);
    }

    #onboardingModal.show {
      display: flex;
    }

    .roadmap-step {
      position: relative;
      padding-left: 2rem;
    }

    .roadmap-step::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.5rem;
      bottom: -1.5rem;
      width: 2px;
      background: rgba(14, 165, 233, 0.2);
    }

    .roadmap-step:last-child::before {
      display: none;
    }

    .roadmap-dot {
      position: absolute;
      left: -4px;
      top: 0.5rem;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #0ea5e9;
      box-shadow: 0 0 10px rgba(14, 165, 233, 0.5);
    }
  </style>
</head>

<body class="gradient-bg min-h-screen text-gray-100 font-inter">
  <div class="flex h-screen overflow-hidden">
    <!-- Interactive Navigation Sidebar -->
    <aside class="w-64 p-6 hidden xl:block">
      <div class="nav-container space-y-2">
        <div class="px-3 mb-4">
          <h3 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Navigation</h3>
        </div>
        <a href="#section-step1" class="nav-item active" data-section="section-step1">
          <div class="nav-dot"></div>
          Step 1: Define Goal
        </a>
        <a href="#section-step2" class="nav-item" data-section="section-step2">
          <div class="nav-dot"></div>
          Step 2: Customize
        </a>
        <a href="#section-step3" class="nav-item" data-section="section-step3">
          <div class="nav-dot"></div>
          Step 3: Deploy
        </a>
        <a href="#section-step4" class="nav-item" data-section="section-step4">
          <div class="nav-dot"></div>
          Step 4: Run Demo
        </a>
        <a href="#section-step5" class="nav-item" data-section="section-step5">
          <div class="nav-dot"></div>
          Step 5: Go Production
        </a>
        <div class="px-3 mt-8 mb-4">
          <h3 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Support</h3>
        </div>
        <button onclick="openOnboarding()" class="nav-item w-full text-left">
          <div class="nav-dot"></div>
          About this toolkit
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-6 lg:p-10">
      <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="mb-10 text-center lg:text-left relative">
          <div class="absolute -top-4 -right-4 hidden lg:block text-right">
            <div
              class="text-[11px] text-gray-400 font-medium tracking-tight bg-white/5 px-3 py-1.5 rounded-full border border-white/10 shadow-sm">
              Author: <a href="https://moma.corp.google.com/person/ryotat" target="_blank"
                class="text-sky-400 hover:text-sky-300 transition-colors font-bold ml-1">ryotat@google.com</a>
            </div>
          </div>
          <div
            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-sky-500/10 border border-sky-500/20 text-sky-400 text-xs font-medium mb-4">
            <span class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-2 w-2 bg-sky-500"></span>
            </span>
            Gemini Enterprise Demo Generator (go/ge-demo-generator)
          </div>
          <h1
            class="text-4xl lg:text-5xl font-bold tracking-tight mb-4 py-2 bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">
            Build and run your custom agent demo
          </h1>
          <p
            class="text-gray-400 text-lg max-w-2xl text-center lg:text-left mx-auto lg:mx-0 leading-relaxed font-light">
            Instantly generate <b>custom demo environments</b> for any business domain. This tool <b>dynamically
              synthesizes datasets</b> and configures agents tailored to your client's unique challenges.
            It is based on the <a href="https://github.com/google/mcp/tree/main/examples/launchmybakery" target="_blank"
              class="text-sky-400 hover:underline font-medium">LaunchMyBakery</a> repository. For a deep dive into the
            architecture, see this <a href="https://adventofagents.com/day/11" target="_blank"
              class="text-sky-400 hover:underline font-medium">architectural overview video</a>.
          </p>
        </header>

        <!-- Demo Overview & Architecture (Collapsible) -->
        <section class="glass rounded-3xl mb-10 overflow-hidden border border-white/5 shadow-xl">
          <button onclick="toggleArchitecture()"
            class="w-full flex items-center justify-between p-6 lg:p-8 hover:bg-white/5 transition-all text-left group">
            <div class="flex items-center gap-4">
              <div
                class="w-10 h-10 rounded-2xl bg-sky-500/10 flex items-center justify-center text-sky-400 group-hover:scale-110 transition-transform">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                  </path>
                </svg>
              </div>
              <div>
                <h3 class="text-sm font-bold text-gray-200">How it works</h3>
                <p class="text-[11px] text-gray-500 mt-1">Architecture and data orchestration details</p>
              </div>
            </div>
            <svg id="archChevron" class="w-5 h-5 text-gray-600 transition-transform duration-300" fill="none"
              stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div id="architectureContent" class="hidden border-t border-white/5 bg-black/20 p-6 lg:p-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
              <div>
                <h3 class="text-xs font-bold text-sky-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M13 10V3L4 14h7v7l9-11h-7z">
                    </path>
                  </svg>
                  Dynamic Data Generation
                </h3>
                <p class="text-[13px] text-gray-300 leading-relaxed mb-4">
                  Unlike static templates, this accelerator <b>auto-generates data</b> based on the customer problem you
                  input. It creates an orchestration between <b>BigQuery</b> macro-analytics and <b>Google Maps</b>
                  real-world grounding.
                </p>
                <ul class="space-y-3">
                  <li class="text-[11px] text-gray-300 flex items-start gap-2">
                    <span class="text-sky-400 mt-0.5">â€¢</span>
                    <span><b>Contextual Data:</b> Dynamically generated demographics, sales history, and market
                      trends.</span>
                  </li>
                  <li class="text-[11px] text-gray-300 flex items-start gap-2">
                    <span class="text-sky-400 mt-0.5">â€¢</span>
                    <span><b>Tailored Reasoning:</b> A pre-configured agent with instructions specific to the business
                      goal.</span>
                  </li>
                </ul>
              </div>

              <div class="relative h-full flex flex-col min-h-[300px]">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest">Agent Runtime Architecture</h3>
                  <div class="flex items-center gap-2">
                    <span class="text-[10px] text-gray-500 font-mono bg-white/5 px-2 py-0.5 rounded">Interactive: Pan &
                      Zoom</span>
                  </div>
                </div>

                <div class="zoom-container flex-1">
                  <div id="archZoomContent" class="zoom-content p-6">
                    <svg id="archSvg" class="w-full h-auto max-w-[650px] select-none" viewBox="0 0 650 320" fill="none">
                      <!-- Google Cloud Boundary -->
                      <rect x="230" y="40" width="400" height="260" rx="20" fill="white" fill-opacity="0.03"
                        stroke="white" stroke-opacity="0.1" stroke-width="1" stroke-dasharray="8 4" />
                      <text x="245" y="65" fill="#f1f5f9" fill-opacity="0.5" font-family="Inter" font-size="12"
                        font-weight="700">Google Cloud</text>

                      <!-- Node: Agent Development Kit -->
                      <rect x="20" y="130" width="200" height="60" rx="12" fill="#0ea5e9" fill-opacity="0.1"
                        stroke="#0ea5e9" stroke-width="1" />
                      <text x="85" y="158" fill="#f1f5f9" font-family="Inter" font-size="11" font-weight="700">Agent
                        Development Kit</text>
                      <text x="85" y="172" fill="#94a3b8" font-family="Inter" font-size="9">Local Agent</text>
                      <circle cx="50" cy="160" r="15" fill="white" fill-opacity="0.1" />
                      <path d="M45 155 Q50 150 55 155 M45 165 Q50 170 55 165" stroke="#f1f5f9" stroke-width="1" />

                      <!-- Connections from ADK -->
                      <g stroke="#334155" stroke-width="1.5">
                        <path d="M220 160 L260 160" /> <!-- Main stem -->
                        <path d="M260 160 L260 100 L290 100" /> <!-- To Gemini -->
                        <path d="M260 160 L290 160" /> <!-- To BQ MCP -->
                        <path d="M260 160 L260 250 L290 250" /> <!-- To Maps MCP -->
                      </g>

                      <!-- Arrows for ADK connections -->
                      <path d="M290 100 L284 97 M290 100 L284 103" stroke="#334155" stroke-width="1.5" />
                      <path d="M290 160 L284 157 M290 160 L284 163" stroke="#334155" stroke-width="1.5" />
                      <path d="M290 250 L284 247 M290 250 L284 253" stroke="#334155" stroke-width="1.5" />

                      <!-- Connections to Targets -->
                      <g stroke="#334155" stroke-width="1.5">
                        <path d="M440 160 L490 160" /> <!-- BQ MCP to Dataset -->
                        <path d="M470 250 L530 250" /> <!-- Maps MCP to API -->
                      </g>
                      <path d="M490 160 L484 157 M490 160 L484 163" stroke="#334155" stroke-width="1.5" />
                      <path d="M530 250 L524 247 M530 250 L524 253" stroke="#334155" stroke-width="1.5" />

                      <!-- Node: Gemini -->
                      <rect x="290" y="70" width="150" height="60" rx="12" fill="white" fill-opacity="0.05"
                        stroke="white" stroke-opacity="0.2" />
                      <text x="345" y="98" fill="#f1f5f9" font-family="Inter" font-size="11" font-weight="700">Gemini 3
                        Pro</text>
                      <text x="345" y="112" fill="#94a3b8" font-family="Inter" font-size="9">Vertex AI</text>
                      <path d="M310 90 L325 110 L310 110 L325 90 Z" fill="#38bdf8" fill-opacity="0.5" />

                      <!-- Node: MCP Server BigQuery -->
                      <rect x="290" y="140" width="150" height="60" rx="12" fill="#10b981" fill-opacity="0.1"
                        stroke="#10b981" stroke-width="1" />
                      <text x="345" y="165" fill="#f1f5f9" font-family="Inter" font-size="10" font-weight="700">MCP
                        Server</text>
                      <text x="345" y="178" fill="#f1f5f9" font-family="Inter" font-size="10" font-weight="700">for
                        BigQuery</text>
                      <circle cx="315" cy="170" r="12" fill="#10b981" fill-opacity="0.2" />

                      <!-- Node: MCP Server Maps -->
                      <rect x="290" y="220" width="180" height="60" rx="12" fill="#f59e0b" fill-opacity="0.1"
                        stroke="#f59e0b" stroke-width="1" />
                      <text x="345" y="245" fill="#f1f5f9" font-family="Inter" font-size="10" font-weight="700">MCP
                        Server for Maps</text>
                      <text x="345" y="258" fill="#94a3b8" font-family="Inter" font-size="9">Grounding Lite</text>

                      <!-- Node: BigQuery Dataset -->
                      <rect x="490" y="130" width="130" height="60" rx="12" fill="white" fill-opacity="0.05"
                        stroke="white" stroke-opacity="0.1" />
                      <text x="555" y="165" text-anchor="middle" fill="#f1f5f9" font-family="Inter" font-size="11"
                        font-weight="700">BigQuery Dataset</text>

                      <!-- Node: Maps APIs -->
                      <rect x="530" y="220" width="100" height="60" rx="12" fill="white" fill-opacity="0.05"
                        stroke="white" stroke-opacity="0.1" />
                      <text x="580" y="255" text-anchor="middle" fill="#f1f5f9" font-family="Inter" font-size="10"
                        font-weight="700">Maps APIs</text>
                    </svg>
                  </div>
                  <div class="zoom-controls">
                    <button onclick="changeZoom(0.2)" class="zoom-btn" title="Zoom In">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                      </svg>
                    </button>
                    <button onclick="changeZoom(-0.2)" class="zoom-btn" title="Zoom Out">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                      </svg>
                    </button>
                    <button onclick="resetZoom()" class="zoom-btn" title="Reset View">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                        </path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Video Deep Dive & Link -->
            <div class="mt-10 pt-10 border-t border-white/5">
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
                <div class="aspect-video w-full rounded-2xl overflow-hidden border border-white/10 shadow-2xl">
                  <iframe class="w-full h-full" src="https://www.youtube.com/embed/wzccErUYhTI"
                    title="Architecture Deep Dive" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>
                </div>
                <div>
                  <h3 class="text-xs font-bold text-sky-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                    </svg>
                    Deep Dive Resources
                  </h3>
                  <p class="text-[13px] text-gray-300 leading-relaxed mb-6">
                    Looking for more details? Explore the complete walkthrough of this project and the underlying ADK
                    Framework.
                  </p>
                  <a href="https://adventofagents.com/day/11" target="_blank"
                    class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-[12px] font-bold text-sky-400 transition-all">
                    <span>Read "Advent of Agents: Google Managed MCP"</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Generation Form - Step 1 -->
        <section id="section-step1" class="glass rounded-3xl p-6 lg:p-8 mb-10 fade-in shadow-xl ring-2 ring-sky-500/20">
          <div class="flex items-center gap-3 mb-8">
            <span
              class="flex h-10 w-10 items-center justify-center rounded-2xl bg-sky-500 text-white font-bold shadow-lg shadow-sky-500/40">1</span>
            <div>
              <h2 class="text-xl font-bold text-white uppercase tracking-tight">Step 1: Define Business Challenge</h2>
              <p class="text-[11px] text-gray-500">Select a template or describe your customer's problem</p>
            </div>
          </div>

          <!-- Templates & Language -->
          <div class="mb-8 p-6 bg-white/5 rounded-2xl border border-white/10 shadow-inner">
            <div class="flex items-center justify-between mb-4">
              <label class="text-[10px] font-bold text-sky-400 uppercase tracking-widest flex items-center gap-2">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
                Industry Templates
              </label>
              <div class="flex items-center gap-2 bg-black/20 rounded-lg p-1 border border-white/5 shadow-sm">
                <svg class="w-3 h-3 text-gray-500 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129">
                  </path>
                </svg>
                <select id="langSelector" onchange="updateSamples()"
                  class="bg-transparent text-[10px] outline-none text-sky-400 font-bold px-1 py-0.5 cursor-pointer hover:text-sky-300 transition-colors">
                  <option value="en">English</option>
                  <option value="ja">æ—¥æœ¬èª</option>
                  <option value="zh">ä¸­æ–‡</option>
                  <option value="fr">FranÃ§ais</option>
                  <option value="de">Deutsch</option>
                  <option value="es">EspaÃ±ol</option>
                </select>
              </div>
            </div>

            <div id="sampleChips" class="flex flex-wrap gap-2.5">
              <!-- Samples will be injected here -->
            </div>
          </div>

          <div class="mb-6">
            <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 ml-1">Detail the
              Business Scenario</label>
            <textarea id="userGoal" rows="4"
              class="w-full bg-gray-900/50 border border-gray-700 rounded-2xl p-4 text-gray-100 placeholder-gray-600 focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all shadow-inner leading-relaxed"
              placeholder="Example: How to help a retail chain in London optimize seasonal stock based on demographic shifts and regional foot traffic trends?"></textarea>
          </div>

          <!-- Options -->
          <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 border-t border-gray-700 pt-8">
            <div>
              <label class="block text-[10px] text-gray-500 mb-2 font-bold uppercase tracking-widest">Synthesis
                Volume</label>
              <select id="rowCount"
                class="w-full bg-gray-800/50 border border-gray-600 rounded-xl p-3 text-xs text-gray-200">
                <option value="50">50 Rows per Table</option>
                <option value="100" selected>100 Rows per Table</option>
                <option value="500">500 Rows per Table</option>
              </select>
            </div>
            <div>
              <label class="block text-[10px] text-gray-500 mb-2 font-bold uppercase tracking-widest">Dataset
                Complexity</label>
              <select id="tableCount"
                class="w-full bg-gray-800/50 border border-gray-600 rounded-xl p-3 text-xs text-gray-200">
                <option value="1">Minimal (1 Table)</option>
                <option value="2">Standard (2 Tables)</option>
                <option value="3" selected>Advanced (3 Tables)</option>
              </select>
            </div>
            <div>
              <label class="block text-[10px] text-gray-500 mb-2 font-bold uppercase tracking-widest">External Data
                Link</label>
              <input id="publicDatasetId" type="text"
                class="w-full bg-gray-800/50 border border-gray-600 rounded-xl p-3 text-xs text-gray-200 placeholder-gray-600"
                placeholder="Optional: bigquery-public-data.xxx">
            </div>
          </div>

          <!-- Generate Button -->
          <button id="generateBtn" onclick="generateDemo()"
            class="mt-10 w-full bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-500 hover:to-blue-600 text-white font-bold py-5 px-6 rounded-2xl transition-all shadow-lg hover:shadow-sky-500/30 active:scale-[0.99] disabled:opacity-50 flex items-center justify-center gap-3 group">
            <div class="flex flex-col items-center">
              <span id="btnText" class="text-lg uppercase tracking-widest">Generate Setup Script & Assets</span>
              <span class="text-[10px] opacity-70 font-normal tracking-tight mt-1">This generates a .sh script to be
                executed in Cloud Shell</span>
            </div>
            <svg id="btnSpinner" class="hidden w-6 h-6 spinner" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
              </path>
            </svg>
            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor"
              viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
            </svg>
          </button>
        </section>

        <!-- Progress Indicator -->
        <section id="stepsSection" class="hidden glass rounded-2xl p-6 mb-10 fade-in border border-sky-500/30">
          <div class="space-y-4">
            <div id="progress-step-1" class="flex items-center gap-4 transition-all duration-300">
              <div class="step-icon w-6 h-6 rounded bg-gray-700 flex items-center justify-center text-[10px] font-bold">
                1</div>
              <div class="flex-1">
                <p class="text-[11px] font-bold text-gray-300 uppercase tracking-tighter">Domain Logic & Data Synthesis
                </p>
                <p class="text-[9px] text-gray-500 step-message italic">Synthesizing...</p>
              </div>
            </div>
            <div id="progress-step-2" class="flex items-center gap-4 transition-all duration-300">
              <div class="step-icon w-6 h-6 rounded bg-gray-700 flex items-center justify-center text-[10px] font-bold">
                2</div>
              <div class="flex-1">
                <p class="text-[11px] font-bold text-gray-300 uppercase tracking-tighter">Deployable Bundle Packaging
                </p>
                <p class="text-[9px] text-gray-500 step-message italic">Waiting...</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Error Section -->
        <section id="errorSection"
          class="hidden glass rounded-2xl p-6 mb-10 border-l-4 border-red-500 fade-in text-red-100 text-xs font-mono">
          <p id="errorMessage"></p>
        </section>

        <!-- Result Section -->
        <section id="resultSection" class="hidden space-y-10 fade-in pb-24">

          <!-- Post-Synthesis Roadmap -->
          <div id="postSynthesisRoadmap" class="glass rounded-3xl p-8 border border-sky-500/30 bg-sky-500/5 mb-10">
            <h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2">
              <svg class="w-5 h-5 text-sky-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2">
                </path>
              </svg>
              Script Generated! What happens next?
            </h3>
            <div class="space-y-8 ml-2">
              <div class="roadmap-step">
                <div class="roadmap-dot"></div>
                <h4 class="text-sm font-bold text-sky-400 uppercase tracking-tight mb-1">1. Review Generated Assets</h4>
                <p class="text-xs text-gray-400">Audit the synthesized data and agent instructions below. You can refine
                  them before deployment.</p>
              </div>
              <div class="roadmap-step">
                <div class="roadmap-dot"></div>
                <h4 class="text-sm font-bold text-gray-200 uppercase tracking-tight mb-1">2. Run in Your Cloud Shell
                </h4>
                <p class="text-xs text-gray-400">Copy the setup script in <b>Step 3</b> and paste it into YOUR Google
                  Cloud Shell. This app does not provision resources directly in your environment.</p>
              </div>
              <div class="roadmap-step">
                <div class="roadmap-dot"></div>
                <h4 class="text-sm font-bold text-gray-200 uppercase tracking-tight mb-1">3. Launch Live Demo</h4>
                <p class="text-xs text-gray-400">Once the script completes, launch the agent UI from Cloud Shell and use
                  the prompts in <b>Step 4</b>.</p>
              </div>
            </div>
          </div>

          <!-- Step 2: Review & Customize Assets -->
          <div id="section-step2" class="glass rounded-3xl p-8 border border-white/5 scroll-mt-8">
            <div class="flex items-center gap-3 mb-8">
              <span
                class="flex h-10 w-10 items-center justify-center rounded-2xl bg-sky-500 text-white font-bold shadow-lg shadow-sky-500/40">2</span>
              <h2 class="text-xl font-bold text-white uppercase tracking-tight">Step 2: Review & Customize Assets</h2>
            </div>

            <!-- System Instruction -->
            <div class="mb-10">
              <label
                class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 flex items-center gap-2">
                Refine Agent Persona & Instructions
                <span
                  class="text-[8px] font-normal lowercase opacity-60 bg-white/5 px-2 py-0.5 rounded-full border border-white/10">Dynamic
                  script update</span>
              </label>
              <textarea id="systemInstruction" oninput="updateScriptLocally()" rows="3"
                class="w-full bg-black/40 border border-gray-700 rounded-2xl p-5 text-[11px] text-sky-200 font-mono transition-all focus:ring-1 focus:ring-sky-500 shadow-inner leading-relaxed"></textarea>
            </div>

            <!-- Data Preview -->
            <div>
              <div class="flex items-center justify-between mb-4">
                <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest">Audit Synthesized
                  Data Library</label>
                <button onclick="downloadAllCSV()"
                  class="text-[9px] text-sky-400 font-bold border-b border-sky-400/30 hover:text-sky-300 transition-colors uppercase font-mono">Download
                  Raw CSVs</button>
              </div>
              <div id="dataPreview" class="space-y-4"></div>
            </div>
          </div>

          <!-- Step 3: Deploy -->
          <div id="section-step3"
            class="glass rounded-3xl p-10 border border-emerald-500/40 shadow-2xl shadow-emerald-900/20 bg-gradient-to-br from-emerald-900/10 to-transparent scroll-mt-8">
            <div class="flex items-center gap-4 mb-10">
              <span
                class="flex h-12 w-12 items-center justify-center rounded-2xl bg-emerald-500 text-white font-bold text-xl shadow-lg shadow-emerald-500/40">3</span>
              <div>
                <h2 class="text-2xl font-bold text-white uppercase tracking-tight">Step 3: Deploy</h2>
                <p class="text-[11px] text-gray-500">Run the synthesized environment in your own GCP project</p>
              </div>
            </div>

            <!-- Step 1: Initialization (Keep as sub-step title for clarity within Step 3) -->
            <div class="mb-0">
              <div class="flex items-center justify-between mb-4">
                <label
                  class="block text-[11px] font-bold text-sky-400 uppercase tracking-widest flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                  </svg>
                  Execute in Google Cloud Shell
                </label>
                <a href="https://shell.cloud.google.com/cloudshell/editor?cloudshell_tutorial=tutorial.md&cloudshell_git_repo=https://github.com/ryotat7/ge-demo-generator.git"
                  target="_blank" rel="noopener noreferrer"
                  class="px-4 py-1.5 bg-sky-500 hover:bg-sky-400 text-white font-bold rounded-lg text-[10px] transition-all shadow-md flex items-center gap-2">
                  LAUNCH TUTORIAL
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                  </svg>
                </a>
              </div>

              <div class="relative group mb-6">
                <div
                  class="absolute -top-3 left-6 px-3 py-1 bg-gray-800 text-[9px] font-mono text-gray-500 rounded border border-gray-700">
                  Setup Script</div>
                <pre id="setupCommand"
                  class="bg-black/80 rounded-2xl p-8 pt-10 text-[12px] font-mono text-emerald-400 overflow-x-auto border border-sky-500/20 group-hover:border-sky-500/50 transition-all shadow-2xl leading-relaxed"></pre>
                <div class="absolute top-4 right-4 flex gap-2">
                  <button onclick="downloadScript()" title="Download as .sh file"
                    class="p-2.5 rounded-xl bg-gray-800/80 text-gray-400 hover:text-sky-400 border border-gray-700 transition-all shadow-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                  </button>
                  <button onclick="copy('setupCommand')" title="Copy to clipboard"
                    class="p-2.5 rounded-xl bg-gray-800/80 text-gray-400 hover:text-white border border-gray-700 transition-all shadow-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3">
                      </path>
                    </svg>
                  </button>
                </div>
              </div>
              <p class="text-[10px] text-gray-500 flex items-center gap-2 px-2">
                <svg class="w-3 h-3 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                This command will install the ADK, configure BigQuery and Maps MCP servers, and push generated datasets.
              </p>
            </div>

            <!-- Step 2: Interactive Guide -->
            <div id="section-step4" class="mt-12 pt-12 border-t border-white/10 scroll-mt-12">
              <div class="flex items-center gap-4 mb-10">
                <span
                  class="flex h-12 w-12 items-center justify-center rounded-2xl bg-emerald-500 text-white font-bold text-xl shadow-lg shadow-emerald-500/40">4</span>
                <div>
                  <h2 class="text-2xl font-bold text-white uppercase tracking-tight">Step 4: Run Live Demo</h2>
                  <p class="text-[11px] text-gray-500">Engage with your agent using personalized scenarios</p>
                </div>
              </div>

              <div class="flex items-center justify-between mb-6">
                <label
                  class="block text-[11px] font-bold text-emerald-400 uppercase tracking-widest flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z">
                    </path>
                  </svg>
                  Recommended Demo Flow (Tailored Prompts)
                </label>
              </div>
              <div id="demoGuideSteps" class="grid grid-cols-1 gap-4">
                <!-- Prompts will be injected here -->
              </div>
            </div>
          </div>
        </section>

        <!-- Step 5: Production Deployment (Optional) -->
        <section id="section-step5"
          class="hidden glass rounded-3xl p-6 lg:p-8 mb-10 fade-in shadow-xl ring-2 ring-emerald-500/10">
          <div class="flex items-center gap-3 mb-8">
            <span
              class="flex h-10 w-10 items-center justify-center rounded-2xl bg-emerald-500 text-white font-bold shadow-lg shadow-emerald-500/40 text-sm">5</span>
            <div>
              <h2 class="text-xl font-bold text-white uppercase tracking-tight">Step 5: Deploy to Gemini Enterprise</h2>
              <p class="text-[11px] text-gray-500">Scale your demo by deploying to Vertex AI Agent Engine</p>
            </div>
          </div>

          <div class="space-y-6">
            <div class="p-6 bg-white/5 rounded-2xl border border-white/10">
              <h3 class="text-xs font-bold text-emerald-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                  </path>
                </svg>
                1. Enhance with Infrastructure
              </h3>
              <p class="text-[13px] text-gray-300 mb-4">
                Run this in the agent root directory (<code
                  class="text-emerald-400 bg-emerald-400/10 px-1 rounded">.../adk_agent</code>) to add production
                templates.
              </p>
              <div class="relative group">
                <pre
                  class="bg-black/60 rounded-xl p-4 text-[12px] font-mono text-emerald-400 border border-white/5 overflow-x-auto">uvx agent-starter-pack enhance</pre>
                <button onclick="copyRaw('uvx agent-starter-pack enhance')"
                  class="absolute top-3 right-3 p-2 rounded-lg bg-gray-800 text-gray-400 hover:text-white transition-all opacity-0 group-hover:opacity-100 shadow-xl border border-gray-700">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3">
                    </path>
                  </svg>
                </button>
              </div>
              <p class="text-[11px] text-gray-500 mt-2 italic">Accept all default values when prompted.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="p-6 bg-white/5 rounded-2xl border border-white/10">
                <h3 class="text-xs font-bold text-gray-300 uppercase tracking-widest mb-4">2. Deploy to Engine</h3>
                <div class="relative group">
                  <pre
                    class="bg-black/60 rounded-xl p-4 text-[12px] font-mono text-white/80 border border-white/5 overflow-x-auto">make deploy</pre>
                  <button onclick="copyRaw('make deploy')"
                    class="absolute top-3 right-3 p-2 rounded-lg bg-gray-800 text-gray-400 hover:text-white transition-all opacity-0 group-hover:opacity-100 shadow-xl border border-gray-700">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3">
                      </path>
                    </svg>
                  </button>
                </div>
              </div>

              <div class="p-6 bg-white/5 rounded-2xl border border-white/10">
                <h3 class="text-xs font-bold text-gray-300 uppercase tracking-widest mb-4">3. Register Agent</h3>
                <div class="relative group">
                  <pre
                    class="bg-black/60 rounded-xl p-4 text-[12px] font-mono text-white/80 border border-white/5 overflow-x-auto">make register-gemini-enterprise</pre>
                  <button onclick="copyRaw('make register-gemini-enterprise')"
                    class="absolute top-3 right-3 p-2 rounded-lg bg-gray-800 text-gray-400 hover:text-white transition-all opacity-0 group-hover:opacity-100 shadow-xl border border-gray-700">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3">
                      </path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <div class="p-4 bg-sky-500/10 rounded-xl border border-sky-500/20 flex items-start gap-3">
              <svg class="w-5 h-5 text-sky-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <p class="text-[12px] text-sky-300 leading-relaxed">
                After registration, the agent will appear in the <strong>Gemini Enterprise Admin Console</strong>. You
                can then toggle it on to make it available to all users in your organization.
              </p>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- History Sidebar (Moved to Right) -->
    <aside id="sidebar" class="w-72 glass border-l border-gray-700 p-4 hidden lg:block overflow-y-auto">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-400">Recent Demos</h2>
        <button onclick="clearHistory()"
          class="text-[10px] text-gray-500 hover:text-red-400 transition-colors uppercase font-bold">Clear</button>
      </div>
      <div id="historyList" class="space-y-3">
        <!-- History items will be injected here -->
      </div>
    </aside>
  </div>

  <div id="toast">Copied to clipboard!</div>

  <script>
    let currentData = null;

    function toggleArchitecture() {
      const content = document.getElementById('architectureContent');
      const chevron = document.getElementById('archChevron');
      content.classList.toggle('hidden');
      chevron.classList.toggle('rotated');
    }

    const SAMPLES = {
      en: [
        { label: "ğŸ“‰ SaaS Churn", text: "Global SaaS churn analysis and customer retention strategy using historical usage patterns." },
        { label: "ğŸ™ï¸ NY Retail", text: "Retail optimization for Manhattan stores by correlating foot traffic, sales, and local weather." },
        { label: "ğŸ“¦ Supply Chain", text: "Factory downtime prediction and inventory optimization based on parts failure history." },
        { label: "ğŸ¥ Health Tech", text: "Predicting patient readmission rates and optimizing hospital staffing based on historical health data." },
        { label: "âš¡ Smart Grid", text: "Optimizing energy distribution and predicting peak load demands for a city-scale smart grid." }
      ],
      ja: [
        { label: "ğŸª å°å£²åº—å£²ä¸Š", text: "æ±äº¬éƒ½å†…ã®å°å£²åº—å£²ä¸Šåˆ†æã¨ã€æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã‚’çµ„ã¿åˆã‚ã›ãŸåœ¨åº«æœ€é©åŒ–ãŠã‚ˆã³éœ€è¦äºˆæ¸¬ãƒ‡ãƒ¢ã€‚" },
        { label: "ğŸ¨ ãƒ›ãƒ†ãƒ«éœ€è¦", text: "è¦³å…‰éƒ½å¸‚ã«ãŠã‘ã‚‹ãƒ›ãƒ†ãƒ«ã®ç¨¼åƒç‡äºˆæ¸¬ã¨ã€å‘¨è¾ºã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ãŸä¾¡æ ¼å‹•å‘åˆ†æã€‚" },
        { label: "ğŸšš ç‰©æµåŠ¹ç‡åŒ–", text: "é…é€ãƒ«ãƒ¼ãƒˆã®é…å»¶äºˆæ¸¬ã¨ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åŸºã¥ã„ãŸç‡ƒæ–™åŠ¹ç‡ã®æœ€é©åŒ–ãƒ‡ãƒ¢ã€‚" },
        { label: "ğŸšœ è¾²æ¥­DX", text: "åç©«é‡ã®äºˆæ¸¬ã¨ã€æ°—å€™ãƒ‡ãƒ¼ã‚¿ãŠã‚ˆã³å¸‚å ´ä¾¡æ ¼ã‚’çµ„ã¿åˆã‚ã›ãŸå–¶è¾²è¨ˆç”»ã®æœ€é©åŒ–ãƒ‡ãƒ¢ã€‚" },
        { label: "ğŸ­ è£½é€ ãƒ©ã‚¤ãƒ³", text: "è£½é€ å·¥ç¨‹ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯æ¤œçŸ¥ã¨ã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸä¿å®ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®äºˆæ¸¬æœ€é©åŒ–ã€‚" }
      ],
      zh: [
        { label: "ğŸ›’ é›¶å”®åˆ†æ", text: "é›¶å”®é”€å”®åˆ†æå’Œç»“åˆå¤©æ°”æ•°æ®çš„åº“å­˜ä¼˜åŒ–" },
        { label: "ğŸ“‰ å®¢æˆ·æµå¤±", text: "å…¨çƒåŒ–äº§å“çš„SaaSè®¢é˜…æµå¤±åˆ†æå’Œæ”¶å…¥äºˆæ¸¬" },
        { label: "ğŸ—ï¸ ä¾›åº”é“¾", text: "å…¨çƒåˆ¶é€ ä¼ä¸šçš„ä¾›åº”é“¾ä¼˜åŒ–å’Œåº“å­˜ç®¡ç†" },
        { label: "ğŸ¦ é‡‘èé£é™©", text: "åŸºäºäº¤æ˜“å†å²å’Œä¿¡ç”¨è¯„åˆ†çš„é‡‘èæ¬ºè¯ˆæ£€æµ‹å’Œé£é™©è¯„ä¼°ãƒ‡ãƒ¢ã€‚" },
        { label: "ğŸš— æ™ºæ…§äº¤é€š", text: "åŸå¸‚äº¤é€šæµé‡é¢„æµ‹å’ŒåŸºäºå®æ—¶æ•°æ®çš„è·¯ç½‘ä¼˜åŒ–æ–¹æ¡ˆã€‚" }
      ],
      fr: [
        { label: "ğŸ“Š Ventes DÃ©tail", text: "Analyse des ventes au dÃ©tail et optimisation des stocks combinÃ©e aux donnÃ©es mÃ©tÃ©orologiques" },
        { label: "ğŸš› ChaÃ®ne Logistique", text: "Optimisation de la chaÃ®ne logistique et gestion des stocks pour un fabricant mondial" },
        { label: "ğŸ’ Luxe & Trends", text: "Analyse des sentiments sur les rÃ©seaux sociaux et dÃ©couverte de trends pour une marque de luxe" },
        { label: "ğŸ¥ SantÃ© ConnectÃ©e", text: "PrÃ©diction des taux de rÃ©admission des patients et optimisation du personnel hospitalier." },
        { label: "ğŸ”Œ Ã‰nergie Verte", text: "Optimisation de la distribution d'Ã©nergie et prÃ©diction de la demande pour un rÃ©seau intelligent." }
      ],
      de: [
        { label: "ğŸ“ˆ Einzelhandel", text: "Einzelhandelsumsatzanalyse und Bestandsoptimierung kombiniert mit Wetterdaten" },
        { label: "ğŸ­ Produktion", text: "Vorausschauende Wartung und Ausfallzeitprognose basierend auf Produktionsdaten" },
        { label: "ğŸ¦ Fintech Risiko", text: "Finanzielle Risikobewertung und Optimierung von Anlageportfolios" },
        { label: "ğŸ¥ Medizintechnik", text: "Vorhersage von Patienten-Wiederaufnahmeraten und Optimierung der Personalbesetzung in KrankenhÃ¤usern." },
        { label: "ğŸŒ Smart City", text: "Optimierung des Verkehrsflusses und Vorhersage der LuftqualitÃ¤t basierend auf Sensordaten." }
      ],
      es: [
        { label: "ğŸª Venta Minorista", text: "AnÃ¡lisis de ventas minoristas y optimizaciÃ³n de inventario combinados con datos meteorolÃ³gicos" },
        { label: "ğŸ“¦ Cadena de Suministro", text: "OptimizaciÃ³n de la cadena de suministro y gestion de inventario para un fabricante global" },
        { label: "ğŸ· ExportaciÃ³n", text: "AnÃ¡lisis de mercados internacionales y predicciÃ³n de demanda para exportaciÃ³n agrÃ­cola" },
        { label: "ğŸšœ AgroTech", text: "PredicciÃ³n del rendimiento de cultivos y optimizaciÃ³n de la planificaciÃ³n agrÃ­cola basada en el clima." },
        { label: "ğŸ¥ Salud Digital", text: "PredicciÃ³n de reingresos de pacientes y optimizaciÃ³n del personal sanitario en hospitales." }
      ]
    };

    function updateSamples() {
      const lang = document.getElementById('langSelector').value;
      const container = document.getElementById('sampleChips');
      if (!container) return;
      container.innerHTML = '';
      if (SAMPLES[lang]) {
        SAMPLES[lang].forEach((sample, i) => {
          const btn = document.createElement('button');
          btn.onclick = () => setIdea(sample.text);
          btn.className = "idea-chip px-4 py-2 rounded-xl bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-sky-500/20 hover:border-sky-500/50 transition-all text-[11px] font-medium shadow-sm hover:shadow-sky-500/20";
          btn.innerText = sample.label;
          container.appendChild(btn);
        });
      }
    }

    function setIdea(text) {
      const el = document.getElementById('userGoal');
      el.value = text;
      el.classList.add('highlight-glow');
      setTimeout(() => el.classList.remove('highlight-glow'), 1000);
    }

    function generateDemo() {
      const userGoal = document.getElementById('userGoal').value;
      if (!userGoal) return alert('Goal required.');
      const options = { rowCount: document.getElementById('rowCount').value, tableCount: document.getElementById('tableCount').value, publicDatasetId: document.getElementById('publicDatasetId').value };

      const stepsSection = document.getElementById('stepsSection');
      stepsSection.classList.remove('hidden');
      document.getElementById('resultSection').classList.add('hidden');
      document.getElementById('errorSection').classList.add('hidden');

      // Reset progress UI
      const s1 = document.getElementById('progress-step-1');
      const s2 = document.getElementById('progress-step-2');
      s1.className = 'flex items-center gap-4 transition-all duration-300';
      s2.className = 'flex items-center gap-4 transition-all duration-300';
      s1.querySelector('.step-icon').className = 'step-icon w-6 h-6 rounded bg-sky-500/20 text-sky-400 flex items-center justify-center text-[10px] font-bold animate-pulse';
      s1.querySelector('.step-message').innerText = 'Synthesizing...';
      s2.querySelector('.step-message').innerText = 'Waiting...';

      document.getElementById('generateBtn').disabled = true;
      document.getElementById('btnSpinner').classList.remove('hidden');
      document.getElementById('btnText').innerText = 'SYNTHESIZING...';

      // Simulate step 2 animation shortly after start
      setTimeout(() => {
        s1.classList.add('step-completed');
        s1.querySelector('.step-message').innerText = 'Logic synthesis successful';
        s2.querySelector('.step-icon').className = 'step-icon w-6 h-6 rounded bg-sky-500/20 text-sky-400 flex items-center justify-center text-[10px] font-bold animate-pulse';
        s2.querySelector('.step-message').innerText = 'Bundling assets...';
      }, 5000);

      google.script.run
        .withSuccessHandler(res => {
          document.getElementById('generateBtn').disabled = false;
          document.getElementById('btnSpinner').classList.add('hidden');
          document.getElementById('btnText').innerText = 'Generate Setup Script & Assets';

          if (!res.success) return onFailure(res.error);

          // Complete animation
          s2.classList.add('step-completed');
          s2.querySelector('.step-message').innerText = 'Bundle ready';

          setTimeout(() => {
            stepsSection.classList.add('hidden');
            currentData = res;
            showFinalResult(res);
            loadHistory();
          }, 800);
        })
        .withFailureHandler(onFailure)
        .generateDemo(userGoal, options);
    }

    function onFailure(err) {
      document.getElementById('generateBtn').disabled = false;
      document.getElementById('btnSpinner').classList.add('hidden');
      document.getElementById('stepsSection').classList.add('hidden');
      document.getElementById('errorSection').classList.remove('hidden');
      document.getElementById('btnText').innerText = 'Generate Setup Script & Assets';
      document.getElementById('errorMessage').innerText = err;
    }

    function showFinalResult(res) {
      document.getElementById('resultSection').classList.remove('hidden');
      document.getElementById('section-step5').classList.remove('hidden');
      document.getElementById('setupCommand').innerText = `cat <<'__SETUP_SH__' > setup.sh\n${res.setupScript}\n__SETUP_SH__\nbash setup.sh`;
      document.getElementById('systemInstruction').value = res.systemInstruction;

      // Guide
      const guideContainer = document.getElementById('demoGuideSteps');
      guideContainer.innerHTML = '';
      if (res.demoGuide && res.demoGuide.length) {
        res.demoGuide.forEach((step, i) => {
          // Extract prompt between quotes, single quotes, or Japanese corner brackets
          const match = step.match(/"([^"]+)"/) || step.match(/'([^']+)'/) || step.match(/ã€Œ([^ã€]+)ã€/);
          const prompt = match ? match[1] : step;
          const description = match ? step.replace(match[0], '').replace(/^[\d\s.]+|[:ï¼š]\s*/g, '').trim() : '';

          const div = document.createElement('div');
          div.className = "flex flex-col gap-3 p-5 rounded-2xl bg-black/40 border border-white/5 group hover:border-emerald-500/30 transition-all shadow-xl";
          div.innerHTML = `
               <div class="flex items-center gap-3">
                  <span class="text-[10px] font-bold text-emerald-400 bg-emerald-500/10 w-6 h-6 rounded-lg flex items-center justify-center shadow-inner">${i + 1}</span>
                  <p class="text-[11px] font-bold text-gray-400 uppercase tracking-tight">${description}</p>
               </div>
               <div class="relative bg-black/40 rounded-xl p-4 border border-white/5 group-hover:border-emerald-500/20 transition-all">
                  <p class="text-[13px] text-sky-200 select-all leading-relaxed font-mono">${prompt}</p>
                  <button onclick="copyText('${prompt.replace(/'/g, "\\'")}')" class="absolute top-2 right-2 p-2 rounded-lg bg-white/5 text-gray-500 hover:text-emerald-400 hover:bg-emerald-500/10 transition-all">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                  </button>
               </div>
            `;
          guideContainer.appendChild(div);
        });
      }

      // Preview
      const container = document.getElementById('dataPreview');
      container.innerHTML = '';
      res.dataPreview.forEach(table => {
        const div = document.createElement('div');
        div.className = 'glass rounded-xl overflow-hidden border border-white/5 shadow-2xl mb-6 bg-black/20';
        let html = `<div class="bg-white/5 px-4 py-2 flex items-center justify-between border-b border-white/5"><span class="text-[10px] font-bold text-sky-400 uppercase tracking-widest px-2 py-0.5 rounded bg-sky-500/10">${table.tableName}</span><span class="text-[9px] text-gray-500 font-mono">${table.rows.length} rows synthesized</span></div>`;
        html += `<div class="overflow-x-auto"><table class="w-full text-[10px] text-left"><thead class="bg-black/20 text-gray-500"><tr>`;
        table.headers.forEach(h => html += `<th class="px-4 py-3 font-semibold border-r border-white/5 last:border-0 uppercase tracking-tighter">${h}</th>`);
        html += `</tr></thead><tbody class="divide-y divide-white/5">`;
        table.rows.forEach(row => {
          html += `<tr class="hover:bg-white/5 transition-colors">`;
          table.headers.forEach(h => html += `<td class="px-4 py-2.5 text-gray-400 font-mono border-r border-white/5 last:border-0">${row[h]}</td>`);
          html += `</tr>`;
        });
        html += `</tbody></table></div>`;
        div.innerHTML = html;
        container.appendChild(div);
      });
      document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function updateScriptLocally() {
      const instr = document.getElementById('systemInstruction').value;
      google.script.run
        .withSuccessHandler(newScript => {
          currentData.setupScript = newScript;
          document.getElementById('setupCommand').innerText = `cat <<'__SETUP_SH__' > setup.sh\n${newScript}\n__SETUP_SH__\nbash setup.sh`;
        })
        .updateSystemInstruction(currentData.setupScript, instr);
    }

    function downloadFile(content, fileName, mimeType) {
      const blob = new Blob([content], { type: mimeType });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = fileName; a.click();
      window.URL.revokeObjectURL(url);
    }
    function downloadScript() { if (currentData) downloadFile(currentData.setupScript, 'setup.sh', 'text/x-shellscript'); }
    function downloadAllCSV() { if (currentData && currentData.rawTables) currentData.rawTables.forEach(t => downloadFile(t.csvData, `${t.tableName}.csv`, 'text/csv')); }

    function copy(id) {
      const el = document.getElementById(id);
      let text = el.innerText;
      // Extract prompt if inside quotes or ã€Œã€
      const match = text.match(/["'ã€Œ]([^"'ã€]+)["'ã€]/);
      if (match) text = match[1];
      copyRaw(text);
    }

    function copyRaw(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);

      const toast = document.getElementById('toast');
      toast.className = 'show';
      setTimeout(() => { toast.className = toast.className.replace('show', ''); }, 3000);
    }

    function showToast(message = 'Copied to clipboard!') {
      const toast = document.getElementById('toast');
      toast.innerText = message;
      toast.className = 'show';
      setTimeout(() => { toast.className = toast.className.replace('show', ''); }, 3000);
    }

    function copyText(text) {
      showToast();
    }

    function copy(id) {
      const el = document.getElementById(id);
      navigator.clipboard.writeText(el.innerText || el.value);
      showToast();
    }

    function loadHistory() {
      google.script.run.withSuccessHandler(history => {
        const list = document.getElementById('historyList');
        if (!list) return;
        list.innerHTML = '';
        if (history && history.length) {
          history.forEach(item => {
            const div = document.createElement('div');
            div.dataset.timestamp = item.timestamp;
            div.onclick = () => loadDemoFromHistory(item.timestamp);
            div.className = 'glass p-3 rounded-xl border border-white/5 hover:border-sky-500/50 cursor-pointer transition-all group shadow-sm bg-black/20 flex items-start gap-2 relative';
            div.innerHTML = `
                <div class="flex-1 min-w-0">
                  <div class="text-[9px] text-gray-600 mb-1 font-mono">${new Date(item.timestamp).toLocaleDateString()} ${new Date(item.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>
                  <div class="text-[10px] text-gray-400 line-clamp-2 group-hover:text-white tracking-tight leading-snug">${item.userGoal}</div>
                </div>
                <button onclick="deleteHistoryItemFromUI('${item.timestamp}', event)" class="opacity-0 group-hover:opacity-100 p-1.5 rounded-lg hover:bg-red-500/20 text-gray-500 hover:text-red-400 transition-all">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                </button>
            `;
            list.appendChild(div);
          });
        }
      }).getHistory();
    }

    function loadDemoFromHistory(timestamp) {
      if (document.getElementById('generateBtn').disabled) return;

      const listItems = document.querySelectorAll('#historyList > div');
      listItems.forEach(el => el.classList.remove('border-sky-500/80', 'bg-sky-500/5'));

      google.script.run.withSuccessHandler(entry => {
        if (!entry || !entry.result) return alert('Failed to load history data.');

        // Populate form
        document.getElementById('userGoal').value = entry.userGoal;
        if (entry.options) {
          if (entry.options.rowCount) document.getElementById('rowCount').value = entry.options.rowCount;
          if (entry.options.tableCount) document.getElementById('tableCount').value = entry.options.tableCount;
          if (entry.options.publicDatasetId) document.getElementById('publicDatasetId').value = entry.options.publicDatasetId;
        }

        // Populate results
        currentData = entry.result;
        showFinalResult(entry.result);

        // Highlight selected
        const target = document.querySelector(`#historyList > div[data-timestamp="${timestamp}"]`);
        if (target) target.classList.add('border-sky-500/80', 'bg-sky-500/5');

      }).getHistoryItem(timestamp);
    }

    function deleteHistoryItemFromUI(timestamp, event) {
      event.stopPropagation();
      if (!confirm('Remove this demo from history?')) return;

      google.script.run.withSuccessHandler(() => {
        loadHistory();
        // If current data matches deleted item, clear UI? Optional.
      }).deleteHistoryItem(timestamp);
    }

    function clearHistory() { if (confirm('Clear ALL history?')) google.script.run.withSuccessHandler(loadHistory).clearHistory(); }

    window.onload = () => {
      loadHistory();
      updateSamples();

      // Scroll Spy Implementation
      const sections = document.querySelectorAll('section[id], div[id^="section-"]');
      const navItems = document.querySelectorAll('.nav-item');

      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.3
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            navItems.forEach(item => {
              item.classList.remove('active');
              if (item.getAttribute('data-section') === entry.target.id) {
                item.classList.add('active');
              }
            });
          }
        });
      }, observerOptions);

      sections.forEach(section => observer.observe(section));

      initArchZoom();
    };

    let zoomScale = 1;
    let zoomPos = { x: 0, y: 0 };
    function initArchZoom() {
      const container = document.querySelector('.zoom-container');
      const content = document.getElementById('archZoomContent');
      let isDragging = false;
      let startPos = { x: 0, y: 0 };

      container.onmousedown = (e) => {
        isDragging = true;
        startPos = { x: e.clientX - zoomPos.x, y: e.clientY - zoomPos.y };
        container.style.cursor = 'grabbing';
      };

      window.onmousemove = (e) => {
        if (!isDragging) return;
        zoomPos.x = e.clientX - startPos.x;
        zoomPos.y = e.clientY - startPos.y;
        updateZoomTransform();
      };

      window.onmouseup = () => {
        isDragging = false;
        container.style.cursor = 'grab';
      };

      container.onwheel = (e) => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        changeZoom(delta);
      };
    }

    function changeZoom(delta) {
      zoomScale = Math.min(Math.max(0.5, zoomScale + delta), 3);
      updateZoomTransform();
    }

    function resetZoom() {
      zoomScale = 1;
      zoomPos = { x: 0, y: 0 };
      updateZoomTransform();
    }

    function updateZoomTransform() {
      const content = document.getElementById('archZoomContent');
      content.style.transform = `translate(${zoomPos.x}px, ${zoomPos.y}px) scale(${zoomScale})`;
    }
  </script>

  <div id="onboardingModal">
    <div class="glass max-w-lg w-full rounded-3xl p-8 border border-white/10 shadow-2xl">
      <div class="text-center mb-8">
        <div
          class="w-16 h-16 bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl flex items-center justify-center text-white mx-auto mb-4 shadow-lg shadow-sky-500/20">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
        </div>
        <h2 class="text-2xl font-bold text-white mb-2">Welcome! Let's build your AI Demo.</h2>
        <p class="text-gray-400 text-sm">Create hyper-personalized agent demos in minutes.</p>
      </div>

      <div class="space-y-6 mb-10">
        <div class="flex gap-4">
          <div
            class="flex-shrink-0 w-8 h-8 rounded-full bg-sky-500/10 flex items-center justify-center text-xs font-bold text-sky-400 border border-sky-500/20">
            ğŸš€</div>
          <div>
            <h4 class="text-sm font-bold text-gray-200 mb-1">What is this?</h4>
            <p class="text-xs text-gray-400 leading-relaxed">A toolkit to <b>synthesize realistic business datasets</b>
              and <b>agent instructions</b>, offering customization of sample data on top of the <a
                href="https://github.com/google/mcp/tree/main/examples/launchmybakery" target="_blank"
                class="text-sky-400 hover:underline font-bold">LaunchMyBakery</a> demo application. The demo agent
              generates
              <b>dynamic responses</b> using <b>BigQuery</b> and <b>Google Maps</b> via Google-hosted <b>MCP
                servers</b>.
            </p>
          </div>
        </div>
        <div class="flex gap-4">
          <div
            class="flex-shrink-0 w-8 h-8 rounded-full bg-emerald-500/10 flex items-center justify-center text-xs font-bold text-emerald-400 border border-emerald-500/20">
            âš¡</div>
          <div>
            <h4 class="text-sm font-bold text-gray-200 mb-1">The Benefit</h4>
            <p class="text-xs text-gray-400 leading-relaxed">Skip the data prep. Generate a complete, grounded demo
              environment tailored to any industry challenge or customer pitch instantly.</p>
          </div>
        </div>
        <div class="flex gap-4">
          <div
            class="flex-shrink-0 w-8 h-8 rounded-full bg-amber-500/10 flex items-center justify-center text-xs font-bold text-amber-400 border border-amber-500/20">
            ğŸ›¡ï¸</div>
          <div>
            <h4 class="text-sm font-bold text-gray-200 mb-1">How it works</h4>
            <p class="text-xs text-gray-400 leading-relaxed">This app <b>only generates a script</b>. To deploy, you'll
              copy the script and run it in <b>your own Google Cloud Shell</b>. Your data stay in your project.</p>
          </div>
        </div>
      </div>

      <button onclick="closeOnboarding()"
        class="w-full bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-500 hover:to-blue-600 text-white font-bold py-4 rounded-2xl transition-all shadow-lg shadow-sky-500/20 active:scale-[0.98]">
        START BUILDING
      </button>
    </div>
  </div>

  <script>
    function openOnboarding() {
      document.getElementById('onboardingModal').classList.add('show');
    }

    function closeOnboarding() {
      document.getElementById('onboardingModal').classList.remove('show');
      localStorage.setItem('onboarding_seen', 'true');
    }

    // Wrap the existing window.onload to add onboarding logic
    const originalOnload = window.onload;
    window.onload = () => {
      if (typeof originalOnload === 'function') originalOnload();

      if (!localStorage.getItem('onboarding_seen')) {
        document.getElementById('onboardingModal').classList.add('show');
      }
    };
  </script>
</body>

</html>